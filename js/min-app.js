const phoneMask=document.querySelector("input[name='phone']");let keyCode;function mask(e){e.keyCode&&(keyCode=e.keyCode),this.selectionStart<3&&e.preventDefault();let t="+375 (__) ___-__-__",r=0,s=t.replace(/\D/g,""),a=this.value.replace(/\D/g,""),n=t.replace(/[_\d]/g,function(e){return r<a.length?a.charAt(r++)||s.charAt(r):e});r=n.indexOf("_"),-1!=r&&(r<5&&(r=3),n=n.slice(0,r));let o=t.substr(0,this.value.length).replace(/_+/g,function(e){return"\\d{1,"+e.length+"}"}).replace(/[+()]/g,"\\$&");o=new RegExp("^"+o+"$"),(!o.test(this.value)||this.value.length<5||47<keyCode&&keyCode<58)&&(this.value=n),"blur"==e.type&&this.value.length<5&&(this.value="")}phoneMask.addEventListener("input",mask,!1),phoneMask.addEventListener("focus",mask,!1),phoneMask.addEventListener("blur",mask,!1),phoneMask.addEventListener("keydown",mask,!1),function(){const s=document.querySelectorAll(".block-service"),a=document.querySelectorAll(".btn"),n=document.querySelector("#service-form");let e=0,t=0;var r=Math.floor(100/(s.length-1));const o=document.querySelector("#btn-js-next"),c=document.querySelector("#btn-js-back"),l=document.querySelector("#btn-js-send"),d=document.querySelector("#btn-js-main"),i=document.querySelector(".result__progress"),u=document.querySelector(".result__interest"),v=document.querySelector(".result__number"),m=document.querySelector("input[name='name']"),p=document.querySelector("input[name='email']"),L=document.querySelector("input[name='phone']");document.addEventListener("DOMContentLoaded",()=>{o.addEventListener("click",function(){e++,s.forEach(e=>e.classList.remove("block-service--active")),s[e].classList.add("block-service--active"),0<e&&c.classList.add("btn--active"),s.length-e==2&&(o.classList.remove("btn--active"),l.classList.add("btn--active")),t+=r,v.textContent=t,u.style.left=t+"%",i.style.width=t+"%"}),c.addEventListener("click",function(){e--,s.forEach(e=>e.classList.remove("block-service--active")),s[e].classList.add("block-service--active"),0===e&&c.classList.remove("btn--active"),t-=r,v.textContent=t,i.style.width=t+"%",u.style.left=t+"%",l.classList.contains("btn--active")&&(l.classList.remove("btn--active"),o.classList.add("btn--active"))}),n.addEventListener("submit",function(e){e.preventDefault(),/^[а-яА-Я\-]{0,}\s[а-яА-Я\-]{1,}(\s[А-Я][а-яА-Я\-]{1,})?$/.test(m.value)?(m.parentNode.classList.remove("error"),m.parentNode.classList.remove("error--name")):(m.parentNode.classList.add("error"),m.parentNode.classList.add("error--name")),""===m.value&&(m.parentNode.classList.add("error"),m.parentNode.classList.add("error--name")),/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(p.value)?(p.parentNode.classList.remove("error"),p.parentNode.classList.remove("error--email")):(p.parentNode.classList.add("error"),p.parentNode.classList.add("error--email")),""===m.value&&(p.parentNode.classList.add("error"),p.parentNode.classList.add("error--email")),19==L.value.length?(L.parentNode.classList.remove("error"),L.parentNode.classList.remove("error--phone")):(L.parentNode.classList.add("error"),L.parentNode.classList.add("error--phone")),""===L.value&&(L.parentNode.classList.add("error"),L.parentNode.classList.add("error--phone"));let t=Array.from((e=n,new FormData(e).entries()));let r=0;t.forEach(e=>{1===e.indexOf("")&&r++}),0===r&&null===document.querySelector(".error")&&(s.forEach(e=>e.classList.remove("block-service--active")),a.forEach(e=>e.classList.remove("btn--active")),d.classList.add("btn--active"),s[s.length-1].classList.add("block-service--active"),v.textContent=100,u.style.left="100%",i.style.width="100%",console.log("Отправка!"),console.log(JSON.parse(JSON.stringify(t))))})})}();